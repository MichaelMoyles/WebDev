<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel = stylesheet type ="text/css" href="./assign1.css">
        <title>US Senate</title>
    </head>
    
    <body>

        <div id="id01"></div>
        <div id="id02"></div>
        
        <script>
            
            var parsedObj;
            var xmlhttp = new XMLHttpRequest();
            var url = "senators.json";

            xmlhttp.onreadystatechange = function() {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    parsedObj = JSON.parse(xmlhttp.responseText);
                    run()
                }
            };
            
            xmlhttp.open("GET", url, true);
            xmlhttp.send();

            function run(){
                DemvRep(parsedObj);
                totalSenators(parsedObj);
            };
            
            function DemvRep(obj) {
                var senators = obj.objects;
                var DemvRep = "<table>";
                DemvRep += "<tr><th colspan=3>Number Dem, Rep & Ind</th></tr>";
                var c_Dem = 0;
                var c_Rep = 0;
                var ind = 0
                for (var i=0; i <senators.length; i++) {   
                    if (senators[i].party == "Republican") {
                        c_Rep += 1;
                    } else if (senators[i].party == "Democrat") {
                        c_Dem += 1;
                    } else {
                        ind += 1
                    }
                }
                
                DemvRep += "<tr><td>" + c_Dem + "</td><td>" + c_Rep + "</td><td>" + ind + "</td></tr></table>";
                document.getElementById("id01").innerHTML = DemvRep;
            }
            
            function totalSenators(obj) {
                var senators = obj.objects;
    
                // This code iterates through the senators arry and writes html code to put the senator's information in a table.
                
                // Instead of looping through 3 times, create a list or a dictionary to store the variables during the first loop then iterate through the loop and display the values on the second loop
                var senatorInfo = "<ul>";   
                for (var i=0; i <senators.length; i++) {    
                    if (senators[i].leadership_title != null && senators[i].party == "Democrat") {
                        var senatorTitle = senators[i].leadership_title
                        var senatorLastName = senators[i].person.firstname;
                        var senatorFirstName = senators[i].person.lastname;
                        var senatorParty = senators[i].party;
                        senatorInfo += "<li>" + senatorTitle + ": " + senatorFirstName + " " + senatorLastName + " (" + senatorParty + ")" + "</li>";
                    } 
                }
                
                for (var i=0; i <senators.length; i++) {
                    if (senators[i].leadership_title != null && senators[i].party == "Republican") {
                        var senatorTitle = senators[i].leadership_title
                        var senatorLastName = senators[i].person.firstname;
                        var senatorFirstName = senators[i].person.lastname;
                        var senatorParty = senators[i].party;
                        senatorInfo += "<li>" + senatorTitle + ": " + senatorFirstName + " " + senatorLastName + " (" + senatorParty + ")" + "</li>";
                    }
                }
                
                for (var i=0; i <senators.length; i++) {
                    if (senators[i].leadership_title != null && senators[i].party != "Republican" && senators[i].party != "Democrat") {
                        var senatorTitle = senators[i].leadership_title
                        var senatorLastName = senators[i].person.firstname;
                        var senatorFirstName = senators[i].person.lastname;
                        var senatorParty = senators[i].party;
                        senatorInfo += "<li>" + senatorTitle + ": " + senatorFirstName + " " + senatorLastName + " (" + senatorParty + ")" + "</li>";
                    }
                }
                
                // Close the list element
                senatorInfo += "</ul>";
                document.getElementById("id02").innerHTML = senatorInfo;
            }
            
        </script>
    </body>
</html>
